<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>mongodbdemo</title>
  <style>
  </style>
</head>
<body>
  <div>用户名<input id="username" type="text" name="username"></div>
  <div>密码<input id="userpwd" type="text" name="userpwd"></div>
  <input type="button" value="上传" name="save" id="save">
  <script>
  const log = console.log.bind(console);
  document.getElementById('save').onclick = () => {
    const headers = {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    };
    const method = 'post';
    const user = { 
      'username': document.getElementById('username').value,
      'userpwd': document.getElementById('userpwd').value,
    };
    const body = JSON.stringify(user);
    fetch('/add', {method, headers, body})
    .then(res => { 
      if (res.ok) {
        res.json().then(data => { data > 0 ? log('账号已经存在') : log('注册成功') })
      } else {
        log(res);
      }
    }, e => log(e));
  }
  </script>
</body>
</html>
